"use strict";(()=>{$(document).ready(()=>{let T=$(".cta_banner"),y=$(".navbar"),x=$(".footer-box"),q=$(y).height();$(window).on("scroll",()=>{if(T.length){let r=$(window).scrollTop()+$(window).height(),w=x.offset().top;window.scrollY>q*2?r>=w?T.removeClass("active"):T.addClass("active"):T.removeClass("active")}y.length&&(window.scrollY>q*2?y.addClass("fixed"):y.removeClass("fixed"))});function R(r,w){$(r).each(function(){new MutationObserver(d=>{d.forEach(t=>{t.type==="attributes"&&t.attributeName==="class"&&w(t.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function U(r){$(r).hasClass("w--open")?y.addClass("open"):y.removeClass("open")}let O,P=!1;R(".w-nav-button",()=>{U(".w-nav-button"),P?($("html, body").scrollTop(O).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(O=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),P=!P});function W(){let r=document.querySelector("[data-modal-group-status]"),w=document.querySelectorAll("[data-modal-name]"),o=document.querySelectorAll("[data-modal-target]");o.forEach(d=>{d.addEventListener("click",function(){let t=this.getAttribute("data-modal-target");o.forEach(i=>i.setAttribute("data-modal-status","not-active")),w.forEach(i=>i.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${t}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${t}"]`).setAttribute("data-modal-status","active"),r&&r.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(d=>{d.addEventListener("click",b)}),document.addEventListener("keydown",function(d){d.key==="Escape"&&b()});function b(){o.forEach(d=>d.setAttribute("data-modal-status","not-active")),r&&r.setAttribute("data-modal-group-status","not-active")}}W();function k(r={}){let o={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...r},b=$(o.videoSelector);if(!$(o.containerSelector).length)return;let t=b[0],i=$(o.labelSelector),l=i.length;function s(){return i.map((e,g)=>{let m=o.labels[e],h=1/l;return{element:$(g),start:(m==null?void 0:m.start)/100,end:(m==null?void 0:m.end)/100}}).get()}t.muted=!0,t.playsInline=!0,t.setAttribute("playsinline",""),t.style.visibility="visible";function a(){gsap.registerPlugin(ScrollTrigger);let e=s(),g=-1,m,h=!1,S=[],F=3;function M(c){for(S.push(c);S.length>F;)S.shift();if(S.length<2)return c;let v=0,f=0;for(let C=0;C<S.length;C++){let _=C+1;f+=S[C]*_,v+=_}return f/v}function n(){h&&(Math.abs(p-t.currentTime)>.01&&(t.currentTime=p),requestAnimationFrame(n))}let p=0,L=gsap.timeline({scrollTrigger:{trigger:o.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:c=>{let v=c.progress*t.duration;p=M(v),h||(h=!0,n()),e.forEach(f=>{let C=o.fadeOverlap,_=f.end-f.start,E=Math.min(C*_,_/3),A=0;c.progress>=f.start&&c.progress<=f.end&&(c.progress<f.start+E?A=(c.progress-f.start)/E:c.progress>f.end-E?A=(f.end-c.progress)/E:A=1),f.element.css("opacity",Math.max(0,Math.min(1,A)))})},onEnter:()=>{p=0,t.currentTime=0},onLeave:()=>{p=t.duration,t.currentTime=t.duration},onEnterBack:()=>{p=t.duration,t.currentTime=t.duration},onLeaveBack:()=>{p=0,t.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){h=!1}),document.addEventListener("visibilitychange",function(){h=!document.hidden&&ScrollTrigger.isScrolling()})}function u(e){return new Promise(g=>{e.setAttribute("preload","auto"),e.setAttribute("playsinline",""),e.muted=!0;let m=10,h=new Array(m).fill(!1);function S(){return h.every(n=>n===!0)}function F(n){return new Promise(p=>{let L=e.duration/m,c=n*L;console.log(`Preloading segment ${n+1}/${m} at time ${c.toFixed(2)}`),e.currentTime=c;function v(){e.readyState===4?(h[n]=!0,p()):setTimeout(v,200)}v()})}async function M(){e.readyState===0&&await new Promise(n=>{e.addEventListener("loadedmetadata",n,{once:!0}),e.load()});try{e.currentTime=0,e.playbackRate=8,await e.play(),await new Promise(n=>setTimeout(n,1e3)),e.pause()}catch(n){console.warn("Fast preload attempt failed:",n)}for(let n=0;n<m;n++)await F(n);for(let n=0;n<3;n++){let p=Math.random()*e.duration;e.currentTime=p,await new Promise(L=>setTimeout(L,300))}e.currentTime=0,o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),g(e)}M().catch(n=>{console.error("Error during video preloading:",n),e.style.opacity="1",e.style.visibility="visible",o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),g(e)})})}gsap.set(i,{opacity:0}),$(o.containerSelector).addClass(o.loadingClass),u(t).then(()=>{a()}).catch(e=>{console.log(e)})}k({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),k({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),k({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),$(document).ready(function(){let r={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function w(){let t={},i=window.location.search;return i&&new URLSearchParams(i).forEach(function(s,a){let u=a.toLowerCase();t[u]=s}),t}function o(t){$.each(t,function(i,l){sessionStorage.setItem(i,l)}),sessionStorage.setItem("paramsStored","true")}function b(){let t={};if(sessionStorage.getItem("paramsStored")==="true")for(let l=0;l<sessionStorage.length;l++){let s=sessionStorage.key(l);s!=="paramsStored"&&(t[s]=sessionStorage.getItem(s))}return t}function d(){let t=w(),i=b();Object.keys(r).some(s=>t[s.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),i={});let l={...i,...t};Object.keys(t).length>0&&o(l),console.log("Using parameters:",l),$.each(r,function(s,a){let u=s.toLowerCase();if(l[u]){let e=l[u];typeof e=="string"&&e.startsWith('"')&&e.endsWith('"')&&(e=e.substring(1,e.length-1));let g=$(`input[name="${a}"]`);g.length?(g.val(e),g.attr("value",e),console.log(`Mapped ${s} to ${a} with value: ${e}`)):console.warn(`Field ${a} not found for ${s}`)}}),$('input[name^="inf_custom_"]').each(function(){let s=$(this),a=s.attr("name");if(Object.values(r).includes(a))return;let u=a.substring(11).toLowerCase();if(l[u]){let e=l[u];typeof e=="string"&&e.startsWith('"')&&e.endsWith('"')&&(e=e.substring(1,e.length-1)),s.val(e),s.attr("value",e),console.log(`Updated ${a} with value: ${e}`)}}),$.each(l,function(s,a){if(Object.keys(r).map(e=>e.toLowerCase()).includes(s.toLowerCase()))return;let u=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===s.toLowerCase())return u=!0,!1}),!u){typeof a=="string"&&a.startsWith('"')&&a.endsWith('"')&&(a=a.substring(1,a.length-1));let e=$('input[name="inf_form_xid"]').parent(),g=$("<input>",{type:"hidden",name:"inf_custom_"+s,value:a});e.append(g),console.log(`Added new field: inf_custom_${s} with value: ${a}`)}})}d()})});})();
