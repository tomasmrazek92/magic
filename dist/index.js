"use strict";(()=>{$(document).ready(()=>{let E=$(".cta_banner"),_=$(".navbar"),R=$(".footer-box"),O=$(_).height();$(window).on("scroll",()=>{if(E.length){let a=$(window).scrollTop()+$(window).height(),l=R.offset().top;window.scrollY>O*2?a>=l?E.removeClass("active"):E.addClass("active"):E.removeClass("active")}_.length&&(window.scrollY>O*2?_.addClass("fixed"):_.removeClass("fixed"))});function W(a,l){$(a).each(function(){new MutationObserver(d=>{d.forEach(i=>{i.type==="attributes"&&i.attributeName==="class"&&l(i.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function U(a){$(a).hasClass("w--open")?_.addClass("open"):_.removeClass("open")}let B,M=!1;W(".w-nav-button",()=>{U(".w-nav-button"),M?($("html, body").scrollTop(B).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(B=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),M=!M});function A(){let a=document.querySelector("[data-modal-group-status]"),l=document.querySelectorAll("[data-modal-name]"),s=document.querySelectorAll("[data-modal-target]");s.forEach(d=>{d.addEventListener("click",function(){let i=this.getAttribute("data-modal-target");s.forEach(u=>u.setAttribute("data-modal-status","not-active")),l.forEach(u=>u.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${i}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${i}"]`).setAttribute("data-modal-status","active"),a&&a.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(d=>{d.addEventListener("click",g)}),document.addEventListener("keydown",function(d){d.key==="Escape"&&g()});function g(){s.forEach(d=>d.setAttribute("data-modal-status","not-active")),a&&a.setAttribute("data-modal-group-status","not-active")}}A();function F(a={}){let s={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...a},g=$(s.videoSelector);if(!$(s.containerSelector).length)return;let i=g[0],u=$(s.labelSelector),e=u.length;function o(){return u.map((t,f)=>{let p=s.labels[t],c=1/e;return{element:$(f),start:(p==null?void 0:p.start)/100,end:(p==null?void 0:p.end)/100}}).get()}i.muted=!0,i.playsInline=!0,i.setAttribute("playsinline",""),i.style.visibility="visible";function n(){gsap.registerPlugin(ScrollTrigger);let t=o(),f=-1,p,c=!1,w=[],S=3;function q(b){for(w.push(b);w.length>S;)w.shift();if(w.length<2)return b;let C=0,h=0;for(let v=0;v<w.length;v++){let k=v+1;h+=w[v]*k,C+=k}return h/C}function L(){c&&(Math.abs(y-i.currentTime)>.01&&(i.currentTime=y),requestAnimationFrame(L))}let y=0,m=gsap.timeline({scrollTrigger:{trigger:s.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:b=>{let C=b.progress*i.duration;y=q(C),c||(c=!0,L()),t.forEach((h,v)=>{let k=s.fadeOverlap,z=h.end-h.start,T=Math.min(k*z,z/3),P=0;v===t.length-1?b.progress>=h.start?P=1:b.progress<h.start+T&&(P=(b.progress-h.start)/T):b.progress>=h.start&&b.progress<=h.end&&(b.progress<h.start+T?P=(b.progress-h.start)/T:b.progress>h.end-T?P=(h.end-b.progress)/T:P=1),h.element.css("opacity",Math.max(0,Math.min(1,P)))})},onEnter:()=>{y=0,i.currentTime=0},onLeave:()=>{y=i.duration,i.currentTime=i.duration},onEnterBack:()=>{y=i.duration,i.currentTime=i.duration},onLeaveBack:()=>{y=0,i.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){c=!1}),document.addEventListener("visibilitychange",function(){c=!document.hidden&&ScrollTrigger.isScrolling()})}function r(t){return new Promise(f=>{let p=t.getAttribute("style")||"",{parentElement:c}=t;c&&c.setAttribute("style",p),t.style.visibility="hidden",t.style.opacity="0",t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.muted=!0;let w=10,S=new Array(w).fill(!1);function q(){return S.every(m=>m===!0)}function L(m){return new Promise(b=>{let C=t.duration/w,h=m*C;console.log(`Preloading segment ${m+1}/${w} at time ${h.toFixed(2)}`),t.currentTime=h;function v(){t.readyState===4?(S[m]=!0,b()):setTimeout(v,200)}v()})}async function y(){t.readyState===0&&await new Promise(m=>{t.addEventListener("loadedmetadata",m,{once:!0}),t.load()});try{t.currentTime=0,t.playbackRate=8,await t.play(),await new Promise(m=>setTimeout(m,1e3)),t.pause()}catch(m){console.warn("Fast preload attempt failed:",m)}for(let m=0;m<w;m++)await L(m);for(let m=0;m<3;m++){let b=Math.random()*t.duration;t.currentTime=b,await new Promise(C=>setTimeout(C,300))}t.currentTime=0,t.style.visibility="visible",t.style.opacity="1",c&&c.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),f(t)}y().catch(m=>{console.error("Error during video preloading:",m),t.style.visibility="visible",t.style.opacity="1",c&&c.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),f(t)})})}gsap.set(u,{opacity:0}),$(s.containerSelector).addClass(s.loadingClass),r(i).then(()=>{n()}).catch(t=>{console.log(t)})}F({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),F({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),F({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),gsap.registerPlugin(MotionPathPlugin);function D(){let a=gsap.matchMedia();return a.add("(min-width: 992px)",()=>{let l,s;function g(){if(l){let f=l.progress();l.progress(0).kill()}s&&s.kill();let i=$(".section_hp-simplified-wall");if(!i.length)return;let e=$(".hp-circle_circles").find("svg path")[0],o=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle-visuals-item"),r=1/(o.length-1);if(!e||!o.length)return;let t=o.length;gsap.set(o,{zIndex:(f,p,c)=>c.length-f,opacity:0,scale:.5}),s=gsap.timeline({paused:!0}),o.each(function(f){let p=$(this),c=f*.25;s.to(p,{motionPath:{path:e,align:e,curviness:2,alignOrigin:[.5,.5],start:1,end:0},duration:1,ease:"none"},c),s.fromTo(p,{opacity:0,scale:.5},{opacity:.5,scale:.5,duration:.25,ease:"none"},c).to(p,{opacity:1,scale:1,duration:.25,ease:"none"},c+.25).to(p,{opacity:.5,scale:.5,duration:.25,ease:"none"},c+.5).to(p,{opacity:0,scale:.5,duration:.25,ease:"none"},c+.75)}),l=gsap.timeline({scrollTrigger:{trigger:i[0],start:"top top",end:"bottom bottom",scrub:1,onUpdate:function(f){let p=f.progress,c=r+p*(1-2*r);s.progress(c);let w=Math.min(Math.floor(p*t),t-1);n.each(function(S){let q=$(this);gsap.set(q,{opacity:S===w?1:0})})}}}),gsap.set(n,{opacity:0}),gsap.set(n.first(),{opacity:1}),s.progress(r),typeof progress!="undefined"&&l.progress(progress),ScrollTrigger.refresh()}g();let d;return $(window).on("resize",function(){clearTimeout(d),d=setTimeout(function(){g()},250)}),()=>{l&&l.kill(),s&&s.kill(),$(window).off("resize")}}),a.add("(max-width: 991px)",()=>{let l,s=0;function g(e,o,n,r,t,f){gsap.timeline().to(e,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:n,end:r},ease:"power2.out"}),gsap.to(e,{duration:.6,opacity:t,scale:f,ease:"power2.out"})}function d(e,o,n,r,t){gsap.timeline().to(e,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:n,end:n},ease:"none"}),gsap.to(e,{opacity:r,scale:t})}function i(e){let o=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle_circles-mobile svg path")[0],r=o.length;if(!n)return;let t=e>s,f=e<s;t||s===null?(g(o.eq(e),n,1,.5,1,1),e-1>=0&&g(o.eq(e-1),n,.5,0,.7,.7),e-2>=0&&d(o.eq(e-2),n,0,0,0),e+1<r&&d(o.eq(e+1),n,1,.7,.7)):f?(g(o.eq(e),n,0,.5,1,1),e+1<r&&g(o.eq(e+1),n,.5,0,.7,.7),e-1>=0&&(console.log(o.eq(e-1)),d(o.eq(e-1),n,0,.5,.7)),e+1<r&&g(o.eq(e+1),n,.5,1,.5,.7),e+2<r&&g(o.eq(e+2),n,1,1,0,0)):s===e&&(d(o.eq(e),n,.5,1,1),d(o.eq(e+1),n,1,.5,.7)),s=e;let c=o.eq(e).find("[data-headline]").text(),w=o.eq(e).find("[data-desc]").text();if(c+w){let S=$(".hp-circle-visuals-content-box");S.find("[data-headline]").text(c),S.find("[data-desc]").text(w)}}function u(){let e=$(".hp-circle_items-wrap .hp-circle_item"),o=$(".hp-circle_circles-mobile svg path")[0];o&&(e.each(function(n){let r=$(this),t=gsap.timeline();t.to(r,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:1,end:0},ease:"none"}),t.progress(0),gsap.set(r,{opacity:0,scale:.5})}),e.on("click",function(){let n=$(this).index();l.slideTo(n)}))}return u(),l=new Swiper(".section_hp-simplified-wall .hp-circle_visuals",{slidesPerView:"auto",centeredSlides:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:600,slideToClickedSlide:!0,navigation:{prevEl:".swiper-arrow.prev.is-circle-wall",nextEl:".swiper-arrow.next.is-circle-wall"},on:{init:function(){setTimeout(()=>i(0),100)},slideChange:function(){typeof optibaseSendConversionEvent=="function"&&optibaseSendConversionEvent("slidechangecircle"),i(this.activeIndex)}}}),()=>{l&&l.destroy(!0,!0)}}),a}function j(){typeof window.optibaseActiveVariants!="undefined"&&$(document).ready(function(){let a=!1;$(window).on("scroll",function(){if(a)return;let l=$(".section_hp-simplified-wall");if(l.length===0)return;let s=l.offset().top+l.outerHeight();$(window).scrollTop()+$(window).height()/2>s&&(typeof optibaseSendConversionEvent=="function"&&(console.log("Test"),optibaseSendConversionEvent("scrollpastcirclewall")),a=!0)})})}D(),j();function x(){gsap.registerPlugin(Draggable);let a=document.querySelectorAll('[data-splitter="wrap"]');if(!a)return;let l=s=>{let g=s.querySelector('[data-splitter="handle"]'),d=s.querySelector('[data-splitter="after"]'),i=s.getBoundingClientRect(),u=parseFloat(s.getAttribute("data-splitter-initial"))||50,e=o=>{i=s.getBoundingClientRect();let n=o/100*i.width;gsap.set(g,{x:n,left:"unset"}),gsap.set(d,{clipPath:`inset(0 0 0 ${o}%)`})};e(u),Draggable.create(g,{type:"x",bounds:s,cursor:"ew-resize",activeCursor:"grabbing",onDrag(){u=this.x/i.width*100,gsap.set(d,{clipPath:`inset(0 0 0 ${u}%)`})},onDragEnd(){typeof optibaseSendConversionEvent=="function"&&optibaseSendConversionEvent("beforeaftermoved")}}),window.addEventListener("resize",()=>e(u))};a.forEach(l)}x(),$(document).ready(function(){let a={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function l(){let i={},u=window.location.search;return u&&new URLSearchParams(u).forEach(function(o,n){let r=n.toLowerCase();i[r]=o}),i}function s(i){$.each(i,function(u,e){sessionStorage.setItem(u,e)}),sessionStorage.setItem("paramsStored","true")}function g(){let i={};if(sessionStorage.getItem("paramsStored")==="true")for(let e=0;e<sessionStorage.length;e++){let o=sessionStorage.key(e);o!=="paramsStored"&&(i[o]=sessionStorage.getItem(o))}return i}function d(){let i=l(),u=g();Object.keys(a).some(o=>i[o.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),u={});let e={...u,...i};Object.keys(i).length>0&&s(e),console.log("Using parameters:",e),$.each(a,function(o,n){let r=o.toLowerCase();if(e[r]){let t=e[r];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1));let f=$(`input[name="${n}"]`);f.length?(f.val(t),f.attr("value",t),console.log(`Mapped ${o} to ${n} with value: ${t}`)):console.warn(`Field ${n} not found for ${o}`)}}),$('input[name^="inf_custom_"]').each(function(){let o=$(this),n=o.attr("name");if(Object.values(a).includes(n))return;let r=n.substring(11).toLowerCase();if(e[r]){let t=e[r];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),o.val(t),o.attr("value",t),console.log(`Updated ${n} with value: ${t}`)}}),$.each(e,function(o,n){if(Object.keys(a).map(t=>t.toLowerCase()).includes(o.toLowerCase()))return;let r=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===o.toLowerCase())return r=!0,!1}),!r){typeof n=="string"&&n.startsWith('"')&&n.endsWith('"')&&(n=n.substring(1,n.length-1));let t=$('input[name="inf_form_xid"]').parent(),f=$("<input>",{type:"hidden",name:"inf_custom_"+o,value:n});t.append(f),console.log(`Added new field: inf_custom_${o} with value: ${n}`)}})}d()})});})();
