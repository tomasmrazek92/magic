"use strict";(()=>{$(document).ready(()=>{let T=$(".cta_banner"),y=$(".navbar"),q=$(".footer-box"),M=$(y).height();$(window).on("scroll",()=>{if(T.length){let r=$(window).scrollTop()+$(window).height(),w=q.offset().top;window.scrollY>M*2?r>=w?T.removeClass("active"):T.addClass("active"):T.removeClass("active")}y.length&&(window.scrollY>M*2?y.addClass("fixed"):y.removeClass("fixed"))});function R(r,w){$(r).each(function(){new MutationObserver(d=>{d.forEach(t=>{t.type==="attributes"&&t.attributeName==="class"&&w(t.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function I(r){$(r).hasClass("w--open")?y.addClass("open"):y.removeClass("open")}let O,P=!1;R(".w-nav-button",()=>{I(".w-nav-button"),P?($("html, body").scrollTop(O).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(O=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),P=!P});function U(){let r=document.querySelector("[data-modal-group-status]"),w=document.querySelectorAll("[data-modal-name]"),s=document.querySelectorAll("[data-modal-target]");s.forEach(d=>{d.addEventListener("click",function(){let t=this.getAttribute("data-modal-target");s.forEach(i=>i.setAttribute("data-modal-status","not-active")),w.forEach(i=>i.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${t}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${t}"]`).setAttribute("data-modal-status","active"),r&&r.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(d=>{d.addEventListener("click",b)}),document.addEventListener("keydown",function(d){d.key==="Escape"&&b()});function b(){s.forEach(d=>d.setAttribute("data-modal-status","not-active")),r&&r.setAttribute("data-modal-group-status","not-active")}}U();function k(r={}){let s={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...r},b=$(s.videoSelector);if(!$(s.containerSelector).length)return;let t=b[0],i=$(s.labelSelector),l=i.length;function n(){return i.map((e,g)=>{let f=s.labels[e],h=1/l;return{element:$(g),start:(f==null?void 0:f.start)/100,end:(f==null?void 0:f.end)/100}}).get()}t.muted=!0,t.playsInline=!0,t.setAttribute("playsinline",""),t.style.visibility="visible";function o(){gsap.registerPlugin(ScrollTrigger);let e=n(),g=-1,f,h=!1,S=[],x=3;function F(c){for(S.push(c);S.length>x;)S.shift();if(S.length<2)return c;let v=0,m=0;for(let C=0;C<S.length;C++){let _=C+1;m+=S[C]*_,v+=_}return m/v}function a(){h&&(Math.abs(p-t.currentTime)>.01&&(t.currentTime=p),requestAnimationFrame(a))}let p=0,L=gsap.timeline({scrollTrigger:{trigger:s.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:c=>{let v=c.progress*t.duration;p=F(v),h||(h=!0,a()),e.forEach(m=>{let C=s.fadeOverlap,_=m.end-m.start,E=Math.min(C*_,_/3),A=0;c.progress>=m.start&&c.progress<=m.end&&(c.progress<m.start+E?A=(c.progress-m.start)/E:c.progress>m.end-E?A=(m.end-c.progress)/E:A=1),m.element.css("opacity",Math.max(0,Math.min(1,A)))})},onEnter:()=>{p=0,t.currentTime=0},onLeave:()=>{p=t.duration,t.currentTime=t.duration},onEnterBack:()=>{p=t.duration,t.currentTime=t.duration},onLeaveBack:()=>{p=0,t.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){h=!1}),document.addEventListener("visibilitychange",function(){h=!document.hidden&&ScrollTrigger.isScrolling()})}function u(e){return new Promise(g=>{e.setAttribute("preload","auto"),e.setAttribute("playsinline",""),e.muted=!0;let f=10,h=new Array(f).fill(!1);function S(){return h.every(a=>a===!0)}function x(a){return new Promise(p=>{let L=e.duration/f,c=a*L;console.log(`Preloading segment ${a+1}/${f} at time ${c.toFixed(2)}`),e.currentTime=c;function v(){e.readyState===4?(h[a]=!0,p()):setTimeout(v,200)}v()})}async function F(){e.readyState===0&&await new Promise(a=>{e.addEventListener("loadedmetadata",a,{once:!0}),e.load()});try{e.currentTime=0,e.playbackRate=8,await e.play(),await new Promise(a=>setTimeout(a,1e3)),e.pause()}catch(a){console.warn("Fast preload attempt failed:",a)}for(let a=0;a<f;a++)await x(a);for(let a=0;a<3;a++){let p=Math.random()*e.duration;e.currentTime=p,await new Promise(L=>setTimeout(L,300))}e.currentTime=0,s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),g(e)}F().catch(a=>{console.error("Error during video preloading:",a),e.style.opacity="1",e.style.visibility="visible",s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),g(e)})})}gsap.set(i,{opacity:0}),$(s.containerSelector).addClass(s.loadingClass),u(t).then(()=>{o()}).catch(e=>{console.log(e)})}k({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),k({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),k({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),$(document).ready(function(){let r={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function w(){let t={},i=window.location.search;return i&&new URLSearchParams(i).forEach(function(n,o){let u=o.toLowerCase();t[u]=n}),t}function s(t){$.each(t,function(i,l){sessionStorage.setItem(i,l)}),sessionStorage.setItem("paramsStored","true")}function b(){let t={};if(sessionStorage.getItem("paramsStored")==="true")for(let l=0;l<sessionStorage.length;l++){let n=sessionStorage.key(l);n!=="paramsStored"&&(t[n]=sessionStorage.getItem(n))}return t}function d(){let t=w(),i=b();Object.keys(r).some(n=>t[n.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),i={});let l={...i,...t};Object.keys(t).length>0&&s(l),console.log("Using parameters:",l),$.each(r,function(n,o){let u=n.toLowerCase();if(l[u]){let e=l[u];typeof e=="string"&&e.startsWith('"')&&e.endsWith('"')&&(e=e.substring(1,e.length-1));let g=$(`input[name="${o}"]`);g.length?(g.val(e),g.attr("value",e),console.log(`Mapped ${n} to ${o} with value: ${e}`)):console.warn(`Field ${o} not found for ${n}`)}}),$('input[name^="inf_custom_"]').each(function(){let n=$(this),o=n.attr("name");if(Object.values(r).includes(o))return;let u=o.substring(11).toLowerCase();if(l[u]){let e=l[u];typeof e=="string"&&e.startsWith('"')&&e.endsWith('"')&&(e=e.substring(1,e.length-1)),n.val(e),n.attr("value",e),console.log(`Updated ${o} with value: ${e}`)}}),$.each(l,function(n,o){if(Object.keys(r).map(e=>e.toLowerCase()).includes(n.toLowerCase()))return;let u=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===n.toLowerCase())return u=!0,!1}),!u){typeof o=="string"&&o.startsWith('"')&&o.endsWith('"')&&(o=o.substring(1,o.length-1));let e=$('input[name="inf_form_xid"]').parent(),g=$("<input>",{type:"hidden",name:"inf_custom_"+n,value:o});e.append(g),console.log(`Added new field: inf_custom_${n} with value: ${o}`)}}),$("#field-debugger").length||$('<button id="field-debugger">').text("Show Current Field Values").css({position:"fixed",bottom:"10px",right:"10px",zIndex:9999,padding:"5px 10px",background:"#007bff",color:"white",border:"none",borderRadius:"4px"}).click(function(n){n.preventDefault();let o={};$('input[type="hidden"]').each(function(){o[$(this).attr("name")]=$(this).val()}),console.log("Current field values:",o),alert("Current field values: "+JSON.stringify(o,null,2))}).appendTo("body")}d()})});})();
