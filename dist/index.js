"use strict";(()=>{$(document).ready(()=>{let E=$(".cta_banner"),_=$(".navbar"),R=$(".footer-box"),O=$(_).height();$(window).on("scroll",()=>{if(E.length){let r=$(window).scrollTop()+$(window).height(),l=R.offset().top;window.scrollY>O*2?r>=l?E.removeClass("active"):E.addClass("active"):E.removeClass("active")}_.length&&(window.scrollY>O*2?_.addClass("fixed"):_.removeClass("fixed"))});function W(r,l){$(r).each(function(){new MutationObserver(w=>{w.forEach(a=>{a.type==="attributes"&&a.attributeName==="class"&&l(a.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function U(r){$(r).hasClass("w--open")?_.addClass("open"):_.removeClass("open")}let B,M=!1;W(".w-nav-button",()=>{U(".w-nav-button"),M?($("html, body").scrollTop(B).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(B=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),M=!M});function D(){let r=document.querySelector("[data-modal-group-status]"),l=document.querySelectorAll("[data-modal-name]");$(document).on("click","[data-modal-target]",function(){let d=$(this).attr("data-modal-target");$("[data-modal-target]").attr("data-modal-status","not-active"),$("[data-modal-name]").attr("data-modal-status","not-active"),$(`[data-modal-target="${d}"]`).attr("data-modal-status","active"),$(`[data-modal-name="${d}"]`).attr("data-modal-status","active"),r&&$(r).attr("data-modal-group-status","active")}),$(document).on("click","[data-modal-close]",s),$(document).on("keydown",function(d){d.key==="Escape"&&s()});function s(){$("[data-modal-target]").attr("data-modal-status","not-active"),r&&$(r).attr("data-modal-group-status","not-active")}}D();function F(r={}){let s={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...r},d=$(s.videoSelector);if(!$(s.containerSelector).length)return;let a=d[0],p=$(s.labelSelector),e=p.length;function o(){return p.map((t,u)=>{let f=s.labels[t],c=1/e;return{element:$(u),start:(f==null?void 0:f.start)/100,end:(f==null?void 0:f.end)/100}}).get()}a.muted=!0,a.playsInline=!0,a.setAttribute("playsinline",""),a.style.visibility="visible";function n(){gsap.registerPlugin(ScrollTrigger);let t=o(),u=-1,f,c=!1,b=[],S=3;function k(h){for(b.push(h);b.length>S;)b.shift();if(b.length<2)return h;let C=0,m=0;for(let v=0;v<b.length;v++){let q=v+1;m+=b[v]*q,C+=q}return m/C}function L(){c&&(Math.abs(y-a.currentTime)>.01&&(a.currentTime=y),requestAnimationFrame(L))}let y=0,g=gsap.timeline({scrollTrigger:{trigger:s.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:h=>{let C=h.progress*a.duration;y=k(C),c||(c=!0,L()),t.forEach((m,v)=>{let q=s.fadeOverlap,z=m.end-m.start,T=Math.min(q*z,z/3),P=0;v===t.length-1?h.progress>=m.start?P=1:h.progress<m.start+T&&(P=(h.progress-m.start)/T):h.progress>=m.start&&h.progress<=m.end&&(h.progress<m.start+T?P=(h.progress-m.start)/T:h.progress>m.end-T?P=(m.end-h.progress)/T:P=1),m.element.css("opacity",Math.max(0,Math.min(1,P)))})},onEnter:()=>{y=0,a.currentTime=0},onLeave:()=>{y=a.duration,a.currentTime=a.duration},onEnterBack:()=>{y=a.duration,a.currentTime=a.duration},onLeaveBack:()=>{y=0,a.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){c=!1}),document.addEventListener("visibilitychange",function(){c=!document.hidden&&ScrollTrigger.isScrolling()})}function i(t){return new Promise(u=>{let f=t.getAttribute("style")||"",{parentElement:c}=t;c&&c.setAttribute("style",f),t.style.visibility="hidden",t.style.opacity="0",t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.muted=!0;let b=10,S=new Array(b).fill(!1);function k(){return S.every(g=>g===!0)}function L(g){return new Promise(h=>{let C=t.duration/b,m=g*C;console.log(`Preloading segment ${g+1}/${b} at time ${m.toFixed(2)}`),t.currentTime=m;function v(){t.readyState===4?(S[g]=!0,h()):setTimeout(v,200)}v()})}async function y(){t.readyState===0&&await new Promise(g=>{t.addEventListener("loadedmetadata",g,{once:!0}),t.load()});try{t.currentTime=0,t.playbackRate=8,await t.play(),await new Promise(g=>setTimeout(g,1e3)),t.pause()}catch(g){console.warn("Fast preload attempt failed:",g)}for(let g=0;g<b;g++)await L(g);for(let g=0;g<3;g++){let h=Math.random()*t.duration;t.currentTime=h,await new Promise(C=>setTimeout(C,300))}t.currentTime=0,t.style.visibility="visible",t.style.opacity="1",c&&c.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),u(t)}y().catch(g=>{console.error("Error during video preloading:",g),t.style.visibility="visible",t.style.opacity="1",c&&c.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),u(t)})})}gsap.set(p,{opacity:0}),$(s.containerSelector).addClass(s.loadingClass),i(a).then(()=>{n()}).catch(t=>{console.log(t)})}F({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),F({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),F({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),gsap.registerPlugin(MotionPathPlugin);function j(){let r=gsap.matchMedia();return r.add("(min-width: 992px)",()=>{let l,s;function d(){if(l){let u=l.progress();l.progress(0).kill()}s&&s.kill();let a=$(".section_hp-simplified-wall");if(!a.length)return;let e=$(".hp-circle_circles").find("svg path")[0],o=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle-visuals-item"),i=1/(o.length-1);if(!e||!o.length)return;let t=o.length;gsap.set(o,{zIndex:(u,f,c)=>c.length-u,opacity:0,scale:.5}),s=gsap.timeline({paused:!0}),o.each(function(u){let f=$(this),c=u*.25;s.to(f,{motionPath:{path:e,align:e,curviness:2,alignOrigin:[.5,.5],start:1,end:0},duration:1,ease:"none"},c),s.fromTo(f,{opacity:0,scale:.5},{opacity:.5,scale:.5,duration:.25,ease:"none"},c).to(f,{opacity:1,scale:1,duration:.25,ease:"none"},c+.25).to(f,{opacity:.5,scale:.5,duration:.25,ease:"none"},c+.5).to(f,{opacity:0,scale:.5,duration:.25,ease:"none"},c+.75)}),l=gsap.timeline({scrollTrigger:{trigger:a[0],start:"top top",end:"bottom bottom",scrub:1,onUpdate:function(u){let f=u.progress,c=i+f*(1-2*i);s.progress(c);let b=Math.min(Math.floor(f*t),t-1);n.each(function(S){let k=$(this);gsap.set(k,{opacity:S===b?1:0})})}}}),gsap.set(n,{opacity:0}),gsap.set(n.first(),{opacity:1}),s.progress(i),typeof progress!="undefined"&&l.progress(progress),ScrollTrigger.refresh()}d();let w;return $(window).on("resize",function(){clearTimeout(w),w=setTimeout(function(){d()},250)}),()=>{l&&l.kill(),s&&s.kill(),$(window).off("resize")}}),r.add("(max-width: 991px)",()=>{let l,s=0;function d(e,o,n,i,t,u){gsap.timeline().to(e,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:n,end:i},ease:"power2.out"}),gsap.to(e,{duration:.6,opacity:t,scale:u,ease:"power2.out"})}function w(e,o,n,i,t){gsap.timeline().to(e,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:n,end:n},ease:"none"}),gsap.to(e,{opacity:i,scale:t})}function a(e){let o=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle_circles-mobile svg path")[0],i=o.length;if(!n)return;let t=e>s,u=e<s;t||s===null?(d(o.eq(e),n,1,.5,1,1),e-1>=0&&d(o.eq(e-1),n,.5,0,.7,.7),e-2>=0&&w(o.eq(e-2),n,0,0,0),e+1<i&&w(o.eq(e+1),n,1,.7,.7)):u?(d(o.eq(e),n,0,.5,1,1),e+1<i&&d(o.eq(e+1),n,.5,0,.7,.7),e-1>=0&&(console.log(o.eq(e-1)),w(o.eq(e-1),n,0,.5,.7)),e+1<i&&d(o.eq(e+1),n,.5,1,.5,.7),e+2<i&&d(o.eq(e+2),n,1,1,0,0)):s===e&&(w(o.eq(e),n,.5,1,1),w(o.eq(e+1),n,1,.5,.7)),s=e;let c=o.eq(e).find("[data-headline]").text(),b=o.eq(e).find("[data-desc]").text();if(c+b){let S=$(".hp-circle-visuals-content-box");S.find("[data-headline]").text(c),S.find("[data-desc]").text(b)}}function p(){let e=$(".hp-circle_items-wrap .hp-circle_item"),o=$(".hp-circle_circles-mobile svg path")[0];o&&(e.each(function(n){let i=$(this),t=gsap.timeline();t.to(i,{duration:1,motionPath:{path:o,align:o,curviness:2,alignOrigin:[.5,.5],start:1,end:0},ease:"none"}),t.progress(0),gsap.set(i,{opacity:0,scale:.5})}),e.on("click",function(){let n=$(this).index();l.slideTo(n)}))}return p(),l=new Swiper(".section_hp-simplified-wall .hp-circle_visuals",{slidesPerView:"auto",centeredSlides:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:600,slideToClickedSlide:!0,navigation:{prevEl:".swiper-arrow.prev.is-circle-wall",nextEl:".swiper-arrow.next.is-circle-wall"},on:{init:function(){setTimeout(()=>a(0),100)},slideChange:function(){typeof optibaseSendConversionEvent=="function"&&optibaseSendConversionEvent("slidechangecircle"),a(this.activeIndex)}}}),()=>{l&&l.destroy(!0,!0)}}),r}function x(){typeof window.optibaseActiveVariants!="undefined"&&$(document).ready(function(){let r=!1;$(window).on("scroll",function(){if(r)return;let l=$(".section_hp-simplified-wall");if(l.length===0)return;let s=l.offset().top+l.outerHeight();$(window).scrollTop()+$(window).height()/2>s&&(typeof optibaseSendConversionEvent=="function"&&(console.log("Test"),optibaseSendConversionEvent("scrollpastcirclewall")),r=!0)})})}j(),x();function G(){gsap.registerPlugin(Draggable);let r=document.querySelectorAll('[data-splitter="wrap"]');if(!r)return;let l=s=>{let d=s.querySelector('[data-splitter="handle"]'),w=s.querySelector('[data-splitter="after"]'),a=s.getBoundingClientRect(),p=parseFloat(s.getAttribute("data-splitter-initial"))||50,e=o=>{a=s.getBoundingClientRect();let n=o/100*a.width;gsap.set(d,{x:n,left:"unset"}),gsap.set(w,{clipPath:`inset(0 0 0 ${o}%)`})};e(p),Draggable.create(d,{type:"x",bounds:s,cursor:"ew-resize",activeCursor:"grabbing",onDrag(){p=this.x/a.width*100,gsap.set(w,{clipPath:`inset(0 0 0 ${p}%)`})},onDragEnd(){typeof optibaseSendConversionEvent=="function"&&optibaseSendConversionEvent("beforeaftermoved")}}),window.addEventListener("resize",()=>e(p))};r.forEach(l)}G(),$(document).ready(function(){let r={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function l(){let a={},p=window.location.search;return p&&new URLSearchParams(p).forEach(function(o,n){let i=n.toLowerCase();a[i]=o}),a}function s(a){$.each(a,function(p,e){sessionStorage.setItem(p,e)}),sessionStorage.setItem("paramsStored","true")}function d(){let a={};if(sessionStorage.getItem("paramsStored")==="true")for(let e=0;e<sessionStorage.length;e++){let o=sessionStorage.key(e);o!=="paramsStored"&&(a[o]=sessionStorage.getItem(o))}return a}function w(){let a=l(),p=d();Object.keys(r).some(o=>a[o.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),p={});let e={...p,...a};Object.keys(a).length>0&&s(e),console.log("Using parameters:",e),$.each(r,function(o,n){let i=o.toLowerCase();if(e[i]){let t=e[i];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1));let u=$(`input[name="${n}"]`);u.length?(u.val(t),u.attr("value",t),console.log(`Mapped ${o} to ${n} with value: ${t}`)):console.warn(`Field ${n} not found for ${o}`)}}),$('input[name^="inf_custom_"]').each(function(){let o=$(this),n=o.attr("name");if(Object.values(r).includes(n))return;let i=n.substring(11).toLowerCase();if(e[i]){let t=e[i];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),o.val(t),o.attr("value",t),console.log(`Updated ${n} with value: ${t}`)}}),$.each(e,function(o,n){if(Object.keys(r).map(t=>t.toLowerCase()).includes(o.toLowerCase()))return;let i=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===o.toLowerCase())return i=!0,!1}),!i){typeof n=="string"&&n.startsWith('"')&&n.endsWith('"')&&(n=n.substring(1,n.length-1));let t=$('input[name="inf_form_xid"]').parent(),u=$("<input>",{type:"hidden",name:"inf_custom_"+o,value:n});t.append(u),console.log(`Added new field: inf_custom_${o} with value: ${n}`)}})}w()})});})();
