"use strict";(()=>{$(document).ready(()=>{let A=$(".cta_banner"),C=$(".navbar"),R=$(".footer-box"),M=$(C).height();$(window).on("scroll",()=>{if(A.length){let l=$(window).scrollTop()+$(window).height(),S=R.offset().top;window.scrollY>M*2?l>=S?A.removeClass("active"):A.addClass("active"):A.removeClass("active")}C.length&&(window.scrollY>M*2?C.addClass("fixed"):C.removeClass("fixed"))});function U(l,S){$(l).each(function(){new MutationObserver(m=>{m.forEach(e=>{e.type==="attributes"&&e.attributeName==="class"&&S(e.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function W(l){$(l).hasClass("w--open")?C.addClass("open"):C.removeClass("open")}let q,k=!1;U(".w-nav-button",()=>{W(".w-nav-button"),k?($("html, body").scrollTop(q).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(q=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),k=!k});function B(){let l=document.querySelector("[data-modal-group-status]"),S=document.querySelectorAll("[data-modal-name]"),o=document.querySelectorAll("[data-modal-target]");o.forEach(m=>{m.addEventListener("click",function(){let e=this.getAttribute("data-modal-target");o.forEach(c=>c.setAttribute("data-modal-status","not-active")),S.forEach(c=>c.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${e}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${e}"]`).setAttribute("data-modal-status","active"),l&&l.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(m=>{m.addEventListener("click",v)}),document.addEventListener("keydown",function(m){m.key==="Escape"&&v()});function v(){o.forEach(m=>m.setAttribute("data-modal-status","not-active")),l&&l.setAttribute("data-modal-group-status","not-active")}}B();function F(l={}){let o={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...l},v=$(o.videoSelector);if(!$(o.containerSelector).length)return;let e=v[0],c=$(o.labelSelector),d=c.length;function s(){return c.map((t,g)=>{let h=o.labels[t],u=1/d;return{element:$(g),start:(h==null?void 0:h.start)/100,end:(h==null?void 0:h.end)/100}}).get()}e.muted=!0,e.playsInline=!0,e.setAttribute("playsinline",""),e.style.visibility="visible";function a(){gsap.registerPlugin(ScrollTrigger);let t=s(),g=-1,h,u=!1,p=[],E=3;function O(i){for(p.push(i);p.length>E;)p.shift();if(p.length<2)return i;let y=0,r=0;for(let b=0;b<p.length;b++){let P=b+1;r+=p[b]*P,y+=P}return r/y}function L(){u&&(Math.abs(w-e.currentTime)>.01&&(e.currentTime=w),requestAnimationFrame(L))}let w=0,n=gsap.timeline({scrollTrigger:{trigger:o.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:i=>{let y=i.progress*e.duration;w=O(y),u||(u=!0,L()),t.forEach((r,b)=>{let P=o.fadeOverlap,x=r.end-r.start,_=Math.min(P*x,x/3),T=0;b===t.length-1?i.progress>=r.start?T=1:i.progress<r.start+_&&(T=(i.progress-r.start)/_):i.progress>=r.start&&i.progress<=r.end&&(i.progress<r.start+_?T=(i.progress-r.start)/_:i.progress>r.end-_?T=(r.end-i.progress)/_:T=1),r.element.css("opacity",Math.max(0,Math.min(1,T)))})},onEnter:()=>{w=0,e.currentTime=0},onLeave:()=>{w=e.duration,e.currentTime=e.duration},onEnterBack:()=>{w=e.duration,e.currentTime=e.duration},onLeaveBack:()=>{w=0,e.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){u=!1}),document.addEventListener("visibilitychange",function(){u=!document.hidden&&ScrollTrigger.isScrolling()})}function f(t){return new Promise(g=>{let h=t.getAttribute("style")||"",{parentElement:u}=t;u&&u.setAttribute("style",h),t.style.visibility="hidden",t.style.opacity="0",t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.muted=!0;let p=10,E=new Array(p).fill(!1);function O(){return E.every(n=>n===!0)}function L(n){return new Promise(i=>{let y=t.duration/p,r=n*y;console.log(`Preloading segment ${n+1}/${p} at time ${r.toFixed(2)}`),t.currentTime=r;function b(){t.readyState===4?(E[n]=!0,i()):setTimeout(b,200)}b()})}async function w(){t.readyState===0&&await new Promise(n=>{t.addEventListener("loadedmetadata",n,{once:!0}),t.load()});try{t.currentTime=0,t.playbackRate=8,await t.play(),await new Promise(n=>setTimeout(n,1e3)),t.pause()}catch(n){console.warn("Fast preload attempt failed:",n)}for(let n=0;n<p;n++)await L(n);for(let n=0;n<3;n++){let i=Math.random()*t.duration;t.currentTime=i,await new Promise(y=>setTimeout(y,300))}t.currentTime=0,t.style.visibility="visible",t.style.opacity="1",u&&u.removeAttribute("style"),o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),g(t)}w().catch(n=>{console.error("Error during video preloading:",n),t.style.visibility="visible",t.style.opacity="1",u&&u.removeAttribute("style"),o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),g(t)})})}gsap.set(c,{opacity:0}),$(o.containerSelector).addClass(o.loadingClass),f(e).then(()=>{a()}).catch(t=>{console.log(t)})}F({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),F({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),F({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),$(document).ready(function(){let l={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function S(){let e={},c=window.location.search;return c&&new URLSearchParams(c).forEach(function(s,a){let f=a.toLowerCase();e[f]=s}),e}function o(e){$.each(e,function(c,d){sessionStorage.setItem(c,d)}),sessionStorage.setItem("paramsStored","true")}function v(){let e={};if(sessionStorage.getItem("paramsStored")==="true")for(let d=0;d<sessionStorage.length;d++){let s=sessionStorage.key(d);s!=="paramsStored"&&(e[s]=sessionStorage.getItem(s))}return e}function m(){let e=S(),c=v();Object.keys(l).some(s=>e[s.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),c={});let d={...c,...e};Object.keys(e).length>0&&o(d),console.log("Using parameters:",d),$.each(l,function(s,a){let f=s.toLowerCase();if(d[f]){let t=d[f];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1));let g=$(`input[name="${a}"]`);g.length?(g.val(t),g.attr("value",t),console.log(`Mapped ${s} to ${a} with value: ${t}`)):console.warn(`Field ${a} not found for ${s}`)}}),$('input[name^="inf_custom_"]').each(function(){let s=$(this),a=s.attr("name");if(Object.values(l).includes(a))return;let f=a.substring(11).toLowerCase();if(d[f]){let t=d[f];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),s.val(t),s.attr("value",t),console.log(`Updated ${a} with value: ${t}`)}}),$.each(d,function(s,a){if(Object.keys(l).map(t=>t.toLowerCase()).includes(s.toLowerCase()))return;let f=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===s.toLowerCase())return f=!0,!1}),!f){typeof a=="string"&&a.startsWith('"')&&a.endsWith('"')&&(a=a.substring(1,a.length-1));let t=$('input[name="inf_form_xid"]').parent(),g=$("<input>",{type:"hidden",name:"inf_custom_"+s,value:a});t.append(g),console.log(`Added new field: inf_custom_${s} with value: ${a}`)}})}m()})});})();
