"use strict";(()=>{$(document).ready(()=>{let q=$(".cta_banner"),v=$(".navbar"),R=$(".footer-box"),O=$(v).height();$(window).on("scroll",()=>{if(q.length){let l=$(window).scrollTop()+$(window).height(),d=R.offset().top;window.scrollY>O*2?l>=d?q.removeClass("active"):q.addClass("active"):q.removeClass("active")}v.length&&(window.scrollY>O*2?v.addClass("fixed"):v.removeClass("fixed"))});function W(l,d){$(l).each(function(){new MutationObserver(c=>{c.forEach(o=>{o.type==="attributes"&&o.attributeName==="class"&&d(o.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function U(l){$(l).hasClass("w--open")?v.addClass("open"):v.removeClass("open")}let z,M=!1;W(".w-nav-button",()=>{U(".w-nav-button"),M?($("html, body").scrollTop(z).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(z=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),M=!M});function D(){let l=document.querySelector("[data-modal-group-status]"),d=document.querySelectorAll("[data-modal-name]"),a=document.querySelectorAll("[data-modal-target]");a.forEach(c=>{c.addEventListener("click",function(){let o=this.getAttribute("data-modal-target");a.forEach(u=>u.setAttribute("data-modal-status","not-active")),d.forEach(u=>u.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${o}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${o}"]`).setAttribute("data-modal-status","active"),l&&l.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(c=>{c.addEventListener("click",m)}),document.addEventListener("keydown",function(c){c.key==="Escape"&&m()});function m(){a.forEach(c=>c.setAttribute("data-modal-status","not-active")),l&&l.setAttribute("data-modal-group-status","not-active")}}D();function F(l={}){let a={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...l},m=$(a.videoSelector);if(!$(a.containerSelector).length)return;let o=m[0],u=$(a.labelSelector),e=u.length;function s(){return u.map((t,r)=>{let g=a.labels[t],p=1/e;return{element:$(r),start:(g==null?void 0:g.start)/100,end:(g==null?void 0:g.end)/100}}).get()}o.muted=!0,o.playsInline=!0,o.setAttribute("playsinline",""),o.style.visibility="visible";function n(){gsap.registerPlugin(ScrollTrigger);let t=s(),r=-1,g,p=!1,b=[],S=3;function L(h){for(b.push(h);b.length>S;)b.shift();if(b.length<2)return h;let _=0,w=0;for(let T=0;T<b.length;T++){let k=T+1;w+=b[T]*k,_+=k}return w/_}function E(){p&&(Math.abs(y-o.currentTime)>.01&&(o.currentTime=y),requestAnimationFrame(E))}let y=0,f=gsap.timeline({scrollTrigger:{trigger:a.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:h=>{let _=h.progress*o.duration;y=L(_),p||(p=!0,E()),t.forEach((w,T)=>{let k=a.fadeOverlap,B=w.end-w.start,C=Math.min(k*B,B/3),P=0;T===t.length-1?h.progress>=w.start?P=1:h.progress<w.start+C&&(P=(h.progress-w.start)/C):h.progress>=w.start&&h.progress<=w.end&&(h.progress<w.start+C?P=(h.progress-w.start)/C:h.progress>w.end-C?P=(w.end-h.progress)/C:P=1),w.element.css("opacity",Math.max(0,Math.min(1,P)))})},onEnter:()=>{y=0,o.currentTime=0},onLeave:()=>{y=o.duration,o.currentTime=o.duration},onEnterBack:()=>{y=o.duration,o.currentTime=o.duration},onLeaveBack:()=>{y=0,o.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){p=!1}),document.addEventListener("visibilitychange",function(){p=!document.hidden&&ScrollTrigger.isScrolling()})}function i(t){return new Promise(r=>{let g=t.getAttribute("style")||"",{parentElement:p}=t;p&&p.setAttribute("style",g),t.style.visibility="hidden",t.style.opacity="0",t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.muted=!0;let b=10,S=new Array(b).fill(!1);function L(){return S.every(f=>f===!0)}function E(f){return new Promise(h=>{let _=t.duration/b,w=f*_;console.log(`Preloading segment ${f+1}/${b} at time ${w.toFixed(2)}`),t.currentTime=w;function T(){t.readyState===4?(S[f]=!0,h()):setTimeout(T,200)}T()})}async function y(){t.readyState===0&&await new Promise(f=>{t.addEventListener("loadedmetadata",f,{once:!0}),t.load()});try{t.currentTime=0,t.playbackRate=8,await t.play(),await new Promise(f=>setTimeout(f,1e3)),t.pause()}catch(f){console.warn("Fast preload attempt failed:",f)}for(let f=0;f<b;f++)await E(f);for(let f=0;f<3;f++){let h=Math.random()*t.duration;t.currentTime=h,await new Promise(_=>setTimeout(_,300))}t.currentTime=0,t.style.visibility="visible",t.style.opacity="1",p&&p.removeAttribute("style"),a.containerSelector&&a.loadingClass&&$(a.containerSelector).removeClass(a.loadingClass),r(t)}y().catch(f=>{console.error("Error during video preloading:",f),t.style.visibility="visible",t.style.opacity="1",p&&p.removeAttribute("style"),a.containerSelector&&a.loadingClass&&$(a.containerSelector).removeClass(a.loadingClass),r(t)})})}gsap.set(u,{opacity:0}),$(a.containerSelector).addClass(a.loadingClass),i(o).then(()=>{n()}).catch(t=>{console.log(t)})}F({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),F({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),F({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]}),gsap.registerPlugin(MotionPathPlugin);function x(){let l=gsap.matchMedia();return l.add("(min-width: 992px)",()=>{let d,a;function m(){if(d){let t=d.progress();d.progress(0).kill()}a&&a.kill();let o=$(".section_hp-simplified-wall");if(!o.length)return;let e=$(".hp-circle_circles").find("svg path")[0],s=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle-visuals-item");if(!e||!s.length)return;let i=s.length;gsap.set(s,{zIndex:(t,r,g)=>g.length-t,opacity:0,scale:.5}),a=gsap.timeline({paused:!0}),s.each(function(t){let r=$(this),g=t*.25;a.to(r,{motionPath:{path:e,align:e,curviness:2,alignOrigin:[.5,.5],start:1,end:0},duration:1,ease:"none"},g),a.fromTo(r,{opacity:0,scale:.5},{opacity:.5,scale:.5,duration:.25,ease:"none"},g).to(r,{opacity:1,scale:1,duration:.25,ease:"none"},g+.25).to(r,{opacity:.5,scale:.5,duration:.25,ease:"none"},g+.5).to(r,{opacity:0,scale:.5,duration:.25,ease:"none"},g+.75)}),d=gsap.timeline({scrollTrigger:{trigger:o[0],start:"top top",end:"bottom bottom",scrub:1,onUpdate:function(t){let{progress:r}=t,g=r*.5+.25;a.progress(g);let p=Math.min(Math.floor(r*i),i-1);n.each(function(b){let S=$(this);gsap.set(S,{opacity:b===p?1:0})})}}}),gsap.set(n,{opacity:0}),gsap.set(n.first(),{opacity:1}),s.on("click",function(){let t=$(this).index(),r=o.offset().top,g=o.outerHeight(),p=$(window).height(),b=g-p,S;if(t===0)S=0;else if(t===i-1)S=1;else{let h=.833/(i-2);t===1?S=.167:S=.167+(t-1)*h}let L=r+b*S;$("html, body").animate({scrollTop:L},1500)}),a.progress(.25),typeof progress!="undefined"&&d.progress(progress),ScrollTrigger.refresh()}m();let c;return $(window).on("resize",function(){clearTimeout(c),c=setTimeout(function(){m()},250)}),()=>{d&&d.kill(),a&&a.kill(),$(window).off("resize")}}),l.add("(max-width: 991px)",()=>{let d,a=0;function m(e,s,n,i,t,r){gsap.timeline().to(e,{duration:1,motionPath:{path:s,align:s,curviness:2,alignOrigin:[.5,.5],start:n,end:i},ease:"power2.out"}),gsap.to(e,{duration:.6,opacity:t,scale:r,ease:"power2.out"})}function c(e,s,n,i,t){gsap.timeline().to(e,{duration:1,motionPath:{path:s,align:s,curviness:2,alignOrigin:[.5,.5],start:n,end:n},ease:"none"}),gsap.to(e,{opacity:i,scale:t})}function o(e){let s=$(".hp-circle_items-wrap .hp-circle_item"),n=$(".hp-circle_circles-mobile svg path")[0],i=s.length;if(!n)return;let t=e>a,r=e<a;t||a===null?(m(s.eq(e),n,1,.5,1,1),e-1>=0&&m(s.eq(e-1),n,.5,0,.7,.7),e-2>=0&&c(s.eq(e-2),n,0,0,0),e+1<i&&c(s.eq(e+1),n,1,.7,.7)):r?(m(s.eq(e),n,0,.5,1,1),e+1<i&&m(s.eq(e+1),n,.5,0,.7,.7),e-1>=0&&(console.log(s.eq(e-1)),c(s.eq(e-1),n,0,.5,.7)),e+1<i&&m(s.eq(e+1),n,.5,1,.5,.7),e+2<i&&m(s.eq(e+2),n,1,1,0,0)):a===e&&(c(s.eq(e),n,.5,1,1),c(s.eq(e+1),n,1,.5,.7)),a=e;let p=s.eq(e).find("[data-headline]").text(),b=s.eq(e).find("[data-desc]").text();if(p+b){let S=$(".hp-circle-visuals-content-box");S.find("[data-headline]").text(p),S.find("[data-desc]").text(b)}}function u(){let e=$(".hp-circle_items-wrap .hp-circle_item"),s=$(".hp-circle_circles-mobile svg path")[0];s&&(e.each(function(n){let i=$(this),t=gsap.timeline();t.to(i,{duration:1,motionPath:{path:s,align:s,curviness:2,alignOrigin:[.5,.5],start:1,end:0},ease:"none"}),t.progress(0),gsap.set(i,{opacity:0,scale:.5})}),e.on("click",function(){let n=$(this).index();d.slideTo(n)}))}return u(),d=new Swiper(".section_hp-simplified-wall .hp-circle_visuals",{slidesPerView:"auto",centeredSlides:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:600,slideToClickedSlide:!0,navigation:{prevEl:".swiper-arrow.prev.is-circle-wall",nextEl:".swiper-arrow.next.is-circle-wall"},on:{init:function(){setTimeout(()=>o(0),100)},slideChange:function(){o(this.activeIndex)}}}),()=>{d&&d.destroy(!0,!0)}}),l}x();function j(){gsap.registerPlugin(Draggable);let l=document.querySelectorAll('[data-splitter="wrap"]');if(!l)return;let d=a=>{let m=a.querySelector('[data-splitter="handle"]'),c=a.querySelector('[data-splitter="after"]'),o=a.getBoundingClientRect(),u=parseFloat(a.getAttribute("data-splitter-initial"))||50,e=s=>{o=a.getBoundingClientRect();let n=s/100*o.width;gsap.set(m,{x:n,left:"unset"}),gsap.set(c,{clipPath:`inset(0 0 0 ${s}%)`})};e(u),Draggable.create(m,{type:"x",bounds:a,cursor:"ew-resize",activeCursor:"grabbing",onDrag(){u=this.x/o.width*100,gsap.set(c,{clipPath:`inset(0 0 0 ${u}%)`})}}),window.addEventListener("resize",()=>e(u))};l.forEach(d)}j(),$(document).ready(function(){let l={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function d(){let o={},u=window.location.search;return u&&new URLSearchParams(u).forEach(function(s,n){let i=n.toLowerCase();o[i]=s}),o}function a(o){$.each(o,function(u,e){sessionStorage.setItem(u,e)}),sessionStorage.setItem("paramsStored","true")}function m(){let o={};if(sessionStorage.getItem("paramsStored")==="true")for(let e=0;e<sessionStorage.length;e++){let s=sessionStorage.key(e);s!=="paramsStored"&&(o[s]=sessionStorage.getItem(s))}return o}function c(){let o=d(),u=m();Object.keys(l).some(s=>o[s.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),u={});let e={...u,...o};Object.keys(o).length>0&&a(e),console.log("Using parameters:",e),$.each(l,function(s,n){let i=s.toLowerCase();if(e[i]){let t=e[i];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1));let r=$(`input[name="${n}"]`);r.length?(r.val(t),r.attr("value",t),console.log(`Mapped ${s} to ${n} with value: ${t}`)):console.warn(`Field ${n} not found for ${s}`)}}),$('input[name^="inf_custom_"]').each(function(){let s=$(this),n=s.attr("name");if(Object.values(l).includes(n))return;let i=n.substring(11).toLowerCase();if(e[i]){let t=e[i];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),s.val(t),s.attr("value",t),console.log(`Updated ${n} with value: ${t}`)}}),$.each(e,function(s,n){if(Object.keys(l).map(t=>t.toLowerCase()).includes(s.toLowerCase()))return;let i=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===s.toLowerCase())return i=!0,!1}),!i){typeof n=="string"&&n.startsWith('"')&&n.endsWith('"')&&(n=n.substring(1,n.length-1));let t=$('input[name="inf_form_xid"]').parent(),r=$("<input>",{type:"hidden",name:"inf_custom_"+s,value:n});t.append(r),console.log(`Added new field: inf_custom_${s} with value: ${n}`)}})}c()})});})();
