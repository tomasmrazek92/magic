"use strict";(()=>{$(document).ready(()=>{let L=$(".cta_banner"),A=$(".navbar"),I=$(".footer-box"),q=$(A).height();$(window).on("scroll",()=>{if(L.length){let a=$(window).scrollTop()+$(window).height(),p=I.offset().top;window.scrollY>q*2?a>=p?L.removeClass("active"):L.addClass("active"):L.removeClass("active")}A.length&&(window.scrollY>q*2?A.addClass("fixed"):A.removeClass("fixed"))});function R(a,p){$(a).each(function(){new MutationObserver(c=>{c.forEach(e=>{e.type==="attributes"&&e.attributeName==="class"&&p(e.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function B(a){$(a).hasClass("w--open")?A.addClass("open"):A.removeClass("open")}let z,x=!1;R(".w-nav-button",()=>{B(".w-nav-button"),x?($("html, body").scrollTop(z).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(z=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),x=!x});function O(){let a=document.querySelector("[data-modal-group-status]"),p=document.querySelectorAll("[data-modal-name]"),s=document.querySelectorAll("[data-modal-target]");s.forEach(c=>{c.addEventListener("click",function(){let e=this.getAttribute("data-modal-target");s.forEach(n=>n.setAttribute("data-modal-status","not-active")),p.forEach(n=>n.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${e}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${e}"]`).setAttribute("data-modal-status","active"),a&&a.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(c=>{c.addEventListener("click",h)}),document.addEventListener("keydown",function(c){c.key==="Escape"&&h()});function h(){s.forEach(c=>c.setAttribute("data-modal-status","not-active")),a&&a.setAttribute("data-modal-group-status","not-active")}}O();function M(a={}){let s={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...a},h=$(s.videoSelector);if(!$(s.containerSelector).length)return;let e=h[0],n=$(s.labelSelector),r=n.length;function o(){return n.map((t,w)=>{let b=s.labels[t],d=1/r;return{element:$(w),start:(b==null?void 0:b.start)/100,end:(b==null?void 0:b.end)/100}}).get()}e.muted=!0,e.playsInline=!0,e.setAttribute("playsinline",""),e.style.visibility="visible";function i(){gsap.registerPlugin(ScrollTrigger);let t=o(),w=-1,b,d=!1,g=[],y=3;function S(m){for(g.push(m);g.length>y;)g.shift();if(g.length<2)return m;let T=0,u=0;for(let _=0;_<g.length;_++){let k=_+1;u+=g[_]*k,T+=k}return u/T}function v(){d&&(Math.abs(C-e.currentTime)>.01&&(e.currentTime=C),requestAnimationFrame(v))}let C=0,l=gsap.timeline({scrollTrigger:{trigger:s.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:m=>{let T=m.progress*e.duration;C=S(T),d||(d=!0,v()),t.forEach((u,_)=>{let k=s.fadeOverlap,F=u.end-u.start,P=Math.min(k*F,F/3),E=0;_===t.length-1?m.progress>=u.start?E=1:m.progress<u.start+P&&(E=(m.progress-u.start)/P):m.progress>=u.start&&m.progress<=u.end&&(m.progress<u.start+P?E=(m.progress-u.start)/P:m.progress>u.end-P?E=(u.end-m.progress)/P:E=1),u.element.css("opacity",Math.max(0,Math.min(1,E)))})},onEnter:()=>{C=0,e.currentTime=0},onLeave:()=>{C=e.duration,e.currentTime=e.duration},onEnterBack:()=>{C=e.duration,e.currentTime=e.duration},onLeaveBack:()=>{C=0,e.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){d=!1}),document.addEventListener("visibilitychange",function(){d=!document.hidden&&ScrollTrigger.isScrolling()})}function f(t){return new Promise(w=>{let b=t.getAttribute("style")||"",{parentElement:d}=t;d&&d.setAttribute("style",b),t.style.visibility="hidden",t.style.opacity="0",t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.muted=!0;let g=10,y=new Array(g).fill(!1);function S(){return y.every(l=>l===!0)}function v(l){return new Promise(m=>{let T=t.duration/g,u=l*T;console.log(`Preloading segment ${l+1}/${g} at time ${u.toFixed(2)}`),t.currentTime=u;function _(){t.readyState===4?(y[l]=!0,m()):setTimeout(_,200)}_()})}async function C(){t.readyState===0&&await new Promise(l=>{t.addEventListener("loadedmetadata",l,{once:!0}),t.load()});try{t.currentTime=0,t.playbackRate=8,await t.play(),await new Promise(l=>setTimeout(l,1e3)),t.pause()}catch(l){console.warn("Fast preload attempt failed:",l)}for(let l=0;l<g;l++)await v(l);for(let l=0;l<3;l++){let m=Math.random()*t.duration;t.currentTime=m,await new Promise(T=>setTimeout(T,300))}t.currentTime=0,t.style.visibility="visible",t.style.opacity="1",d&&d.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),w(t)}C().catch(l=>{console.error("Error during video preloading:",l),t.style.visibility="visible",t.style.opacity="1",d&&d.removeAttribute("style"),s.containerSelector&&s.loadingClass&&$(s.containerSelector).removeClass(s.loadingClass),w(t)})})}gsap.set(n,{opacity:0}),$(s.containerSelector).addClass(s.loadingClass),f(e).then(()=>{i()}).catch(t=>{console.log(t)})}M({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),M({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),M({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]});function U(){let a;function p(){a&&a.kill();let h=$(".section_hp-simplified-wall");if(!h.length)return;let c=$(".hp-circle_circle"),e=$(".hp-circle_items-wrap"),n=$(".hp-circle_items-wrap .hp-circle_item"),r=$(".hp-circle-visuals-item"),o=n.length,f=360/o*(o-1);a=gsap.timeline({scrollTrigger:{trigger:h[0],start:"top top",end:"bottom bottom",scrub:1,onUpdate:function(t){let{progress:w}=t,b=0;n.each(function(d){let g=$(this),y=w*o-d,S=0,v=.5;y>=-1&&y<=2?(y<=0?(S=Math.max(0,1+y),v=.5+S*.5):y<=1?(S=1,v=1,b=d):(S=Math.max(0,2-y),v=.5+S*.5),gsap.set(g,{opacity:S,scale:v,zIndex:Math.floor(S*100)})):gsap.set(g,{opacity:0,scale:.5,zIndex:1})}),r.each(function(d){let g=$(this);gsap.set(g,{opacity:d===b?1:0})})}}}),gsap.set(c,{rotation:90}),gsap.set(n,{rotation:-90}),a.to(c,{rotation:90-f,ease:"none",duration:1},0),a.to(n,{rotation:-90+f,ease:"none",duration:1},0),gsap.set(n,{opacity:0,scale:.5}),gsap.set(r,{opacity:0}),gsap.set(n.first(),{opacity:1,scale:1,zIndex:100}),gsap.set(r.first(),{opacity:1})}p();let s;$(window).on("resize",function(){clearTimeout(s),s=setTimeout(function(){ScrollTrigger.refresh(),p()},250)})}U();function W(){gsap.registerPlugin(Draggable);let a=document.querySelectorAll('[data-splitter="wrap"]');if(!a)return;let p=s=>{let h=s.querySelector('[data-splitter="handle"]'),c=s.querySelector('[data-splitter="after"]'),e=s.getBoundingClientRect(),n=parseFloat(s.getAttribute("data-splitter-initial"))||50,r=o=>{e=s.getBoundingClientRect();let i=o/100*e.width;gsap.set(h,{x:i,left:"unset"}),gsap.set(c,{clipPath:`inset(0 0 0 ${o}%)`})};r(n),Draggable.create(h,{type:"x",bounds:s,cursor:"ew-resize",activeCursor:"grabbing",onDrag(){n=this.x/e.width*100,gsap.set(c,{clipPath:`inset(0 0 0 ${n}%)`})}}),window.addEventListener("resize",()=>r(n))};a.forEach(p)}W(),$(document).ready(function(){let a={utm_content:"inf_custom_Adname",utm_campaign:"inf_custom_CampaignSource",utm_source:"inf_custom_utmsource",utm_location:"inf_custom_utmlocation"};function p(){let e={},n=window.location.search;return n&&new URLSearchParams(n).forEach(function(o,i){let f=i.toLowerCase();e[f]=o}),e}function s(e){$.each(e,function(n,r){sessionStorage.setItem(n,r)}),sessionStorage.setItem("paramsStored","true")}function h(){let e={};if(sessionStorage.getItem("paramsStored")==="true")for(let r=0;r<sessionStorage.length;r++){let o=sessionStorage.key(r);o!=="paramsStored"&&(e[o]=sessionStorage.getItem(o))}return e}function c(){let e=p(),n=h();Object.keys(a).some(o=>e[o.toLowerCase()])&&(console.log("Found UTM parameters in URL, refreshing session storage"),sessionStorage.clear(),n={});let r={...n,...e};Object.keys(e).length>0&&s(r),console.log("Using parameters:",r),$.each(a,function(o,i){let f=o.toLowerCase();if(r[f]){let t=r[f];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1));let w=$(`input[name="${i}"]`);w.length?(w.val(t),w.attr("value",t),console.log(`Mapped ${o} to ${i} with value: ${t}`)):console.warn(`Field ${i} not found for ${o}`)}}),$('input[name^="inf_custom_"]').each(function(){let o=$(this),i=o.attr("name");if(Object.values(a).includes(i))return;let f=i.substring(11).toLowerCase();if(r[f]){let t=r[f];typeof t=="string"&&t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),o.val(t),o.attr("value",t),console.log(`Updated ${i} with value: ${t}`)}}),$.each(r,function(o,i){if(Object.keys(a).map(t=>t.toLowerCase()).includes(o.toLowerCase()))return;let f=!1;if($('input[name^="inf_custom_"]').each(function(){if($(this).attr("name").substring(11).toLowerCase()===o.toLowerCase())return f=!0,!1}),!f){typeof i=="string"&&i.startsWith('"')&&i.endsWith('"')&&(i=i.substring(1,i.length-1));let t=$('input[name="inf_form_xid"]').parent(),w=$("<input>",{type:"hidden",name:"inf_custom_"+o,value:i});t.append(w),console.log(`Added new field: inf_custom_${o} with value: ${i}`)}})}c()})});})();
