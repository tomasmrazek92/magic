"use strict";(()=>{$(document).ready(()=>{let v=$(".cta_banner"),f=$(".navbar"),P=$(".footer-box"),q=$(f).height();$(window).on("scroll",()=>{if(v.length){let n=$(window).scrollTop()+$(window).height(),b=P.offset().top;window.scrollY>q*2?n>=b?v.removeClass("active"):v.addClass("active"):v.removeClass("active")}f.length&&(window.scrollY>q*2?f.addClass("fixed"):f.removeClass("fixed"))});function _(n,b){$(n).each(function(){new MutationObserver(c=>{c.forEach(t=>{t.type==="attributes"&&t.attributeName==="class"&&b(t.target)})}).observe(this,{attributes:!0,attributeFilter:["class"]})})}function B(n){$(n).hasClass("w--open")?f.addClass("open"):f.removeClass("open")}let M,E=!1;_(".w-nav-button",()=>{B(".w-nav-button"),E?($("html, body").scrollTop(M).removeClass("overflow-hidden"),$(".nav").removeClass("open")):(M=$(window).scrollTop(),$("html, body").scrollTop(0).addClass("overflow-hidden"),$(".nav").addClass("open")),E=!E});function F(){let n=document.querySelector("[data-modal-group-status]"),b=document.querySelectorAll("[data-modal-name]"),o=document.querySelectorAll("[data-modal-target]");o.forEach(c=>{c.addEventListener("click",function(){let t=this.getAttribute("data-modal-target");o.forEach(u=>u.setAttribute("data-modal-status","not-active")),b.forEach(u=>u.setAttribute("data-modal-status","not-active")),document.querySelector(`[data-modal-target="${t}"]`).setAttribute("data-modal-status","active"),document.querySelector(`[data-modal-name="${t}"]`).setAttribute("data-modal-status","active"),n&&n.setAttribute("data-modal-group-status","active")})}),document.querySelectorAll("[data-modal-close]").forEach(c=>{c.addEventListener("click",w)}),document.addEventListener("keydown",function(c){c.key==="Escape"&&w()});function w(){o.forEach(c=>c.setAttribute("data-modal-status","not-active")),n&&n.setAttribute("data-modal-group-status","not-active")}}F();function A(n={}){let o={...{containerSelector:".section_window-scroll-wall",videoSelector:".window-scroll-wall_video video",labelSelector:".window-scroll-wall_label",loadingClass:"wall-loading",labels:[],scrubSpeed:.5,fadeOverlap:.1},...n},w=$(o.videoSelector);if(!$(o.containerSelector).length)return;let t=w[0],u=$(o.labelSelector),x=u.length;function z(){return u.map((e,h)=>{let s=o.labels[e],d=1/x;return{element:$(h),start:(s==null?void 0:s.start)/100,end:(s==null?void 0:s.end)/100}}).get()}t.muted=!0,t.playsInline=!0,t.setAttribute("playsinline",""),t.style.visibility="visible";function O(){gsap.registerPlugin(ScrollTrigger);let e=z(),h=-1,s,d=!1,m=[],L=3;function k(r){for(m.push(r);m.length>L;)m.shift();if(m.length<2)return r;let g=0,l=0;for(let p=0;p<m.length;p++){let S=p+1;l+=m[p]*S,g+=S}return l/g}function a(){d&&(Math.abs(i-t.currentTime)>.01&&(t.currentTime=i),requestAnimationFrame(a))}let i=0,y=gsap.timeline({scrollTrigger:{trigger:o.containerSelector,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:r=>{let g=r.progress*t.duration;i=k(g),d||(d=!0,a()),e.forEach(l=>{let p=o.fadeOverlap,S=l.end-l.start,T=Math.min(p*S,S/3),C=0;r.progress>=l.start&&r.progress<=l.end&&(r.progress<l.start+T?C=(r.progress-l.start)/T:r.progress>l.end-T?C=(l.end-r.progress)/T:C=1),l.element.css("opacity",Math.max(0,Math.min(1,C)))})},onEnter:()=>{i=0,t.currentTime=0},onLeave:()=>{i=t.duration,t.currentTime=t.duration},onEnterBack:()=>{i=t.duration,t.currentTime=t.duration},onLeaveBack:()=>{i=0,t.currentTime=0},fastScrollEnd:!0}});ScrollTrigger.addEventListener("scrollEnd",function(){d=!1}),document.addEventListener("visibilitychange",function(){d=!document.hidden&&ScrollTrigger.isScrolling()})}function R(e){return new Promise(h=>{e.setAttribute("preload","auto"),e.setAttribute("playsinline",""),e.muted=!0;let s=10,d=new Array(s).fill(!1);function m(){return d.every(a=>a===!0)}function L(a){return new Promise(i=>{let y=e.duration/s,r=a*y;console.log(`Preloading segment ${a+1}/${s} at time ${r.toFixed(2)}`),e.currentTime=r;function g(){e.readyState===4?(d[a]=!0,i()):setTimeout(g,200)}g()})}async function k(){e.readyState===0&&await new Promise(a=>{e.addEventListener("loadedmetadata",a,{once:!0}),e.load()});try{e.currentTime=0,e.playbackRate=8,await e.play(),await new Promise(a=>setTimeout(a,1e3)),e.pause()}catch(a){console.warn("Fast preload attempt failed:",a)}for(let a=0;a<s;a++)await L(a);for(let a=0;a<3;a++){let i=Math.random()*e.duration;e.currentTime=i,await new Promise(y=>setTimeout(y,300))}e.currentTime=0,o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),h(e)}k().catch(a=>{console.error("Error during video preloading:",a),e.style.opacity="1",e.style.visibility="visible",o.containerSelector&&o.loadingClass&&$(o.containerSelector).removeClass(o.loadingClass),h(e)})})}gsap.set(u,{opacity:0}),$(o.containerSelector).addClass(o.loadingClass),R(t).then(()=>{O()}).catch(e=>{console.log(e)})}A({containerSelector:".section_window-scroll-wall",labels:[{start:0,end:22},{start:22,end:34},{start:34,end:62},{start:62,end:66},{start:66,end:75},{start:75,end:85},{start:85,end:90},{start:90,end:100}]}),A({containerSelector:".section_windowwall-scroll-wall",labels:[{start:0,end:20},{start:58,end:75},{start:75,end:85},{start:85,end:100}]}),A({containerSelector:".section_patiodoors-scroll-wall",labels:[{start:0,end:14},{start:14,end:29},{start:29,end:62},{start:60,end:70},{start:70,end:80},{start:80,end:90},{start:90,end:100}]})});})();
