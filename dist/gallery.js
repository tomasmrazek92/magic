"use strict";(()=>{window.fsAttributes.push(["cmsfilter",e=>{let[t]=e;$(".search_clear").hide(),t.listInstance.on("renderitems",function(){d.init();let i=t.filtersData[0].values.size;console.log(i),i>=1?($("[data-filter-default]").hide(),$("[data-filter-results]").css("display","flex"),$(".search_clear").css("display","flex")):($("[data-filter-default]").show(),$("[data-filter-results]").hide(),$(".search_clear").hide())})}]);window.fsAttributes.push(["cmsload",e=>{let[t]=e;t.on("renderitems",i=>{d.init()})}]);var c=$(".search_input");if(!window.location.href.includes("/blog-categories/")){let e=function(){c.on("input",function(){let t=$(this).val().toLowerCase().trim();$(".p-gallery-menu-link").each(function(){$(this).text().toLowerCase().trim()===t?$(this).addClass("w--current"):$(this).removeClass("w--current")})})};m=e,e(),$(".p-gallery_menu-link").on("click",function(){let t=$(this).text();c.val(t),c[0].dispatchEvent(new Event("input",{bubbles:!0}))})}var m;function p(e,t,i={}){let a={...{typeSpeed:100,wordDelay:2e3,eraseSpeed:50},...i},r=0,s=0,u=!1;function l(){let f=t[r];if(u){if(e.attr("placeholder",f.substring(0,s)),s--,s<0){u=!1,r=(r+1)%t.length,setTimeout(l,a.typeSpeed);return}setTimeout(l,a.eraseSpeed)}else{if(e.attr("placeholder",f.substring(0,s)),s++,s>f.length){u=!0,setTimeout(l,a.wordDelay);return}setTimeout(l,a.typeSpeed)}}l()}typeof searchWords!="undefined"&&p(c,searchWords);var o,d={init:function(){this.bindEvents()},bindEvents:function(){let e=this;$("[data-video-item]").on("click",function(){e.handleVideoClick($(this))}),$(".video-modal_close").on("click",function(){e.closeModal()}),$(".video-modal_close-btn").on("click",function(){e.closeModal()}),$(".video-modal").on("click",function(t){t.target===this&&e.closeModal()}),$(document).on("keydown",function(t){t.key==="Escape"&&$(".video-modal").is(":visible")&&e.closeModal()})},handleVideoClick:function(e){let t=e.attr("data-mp4-source"),i=e.attr("data-webm-source"),n=e.attr("data-poster-src");this.destroyExistingPlayer(),this.setupVideoSources(t,i,n),this.initializePlayer()},destroyExistingPlayer:function(){if(o){let e=o.media;e&&(e.pause(),e.currentTime=0),o.destroy(),o=null}},setupVideoSources:function(e,t,i){let n=$(".video-modal").find("video");n.empty().removeAttr("poster"),t&&n.append(`<source src="${t}" type="video/webm">`),e&&n.append(`<source src="${e}" type="video/mp4">`),i&&n.attr("poster",i),n[0].load()},initializePlayer:function(){let e=this,t=$(".video-modal"),i=t.find("video");setTimeout(function(){o=new Plyr(i[0],{controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],autoplay:!1,loop:{active:!0},ratio:null}),$(".video-modal .plyr").css({"object-fit":"contain",width:"100%",height:"100%"}),e.showModal(t)},50)},showModal:function(e){e.fadeIn(300,function(){setTimeout(function(){o&&o.play()},100)})},closeModal:function(){let e=$(".video-modal");if(o){let t=o.media;t&&(t.pause(),t.currentTime=0)}e.fadeOut(300,function(){d.destroyExistingPlayer()})}};$(document).ready(function(){d.init()});})();
